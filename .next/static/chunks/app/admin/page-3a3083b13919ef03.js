(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{1439:(e,a,t)=>{"use strict";t.d(a,{db:()=>o});var r=t(3915),s=t(5317);let l=(0,r.Wp)({apiKey:"AIzaSyCxX_r_FTLDIKx1gZBs7gAq-Rs5KnyfRcQ",authDomain:"trgovinarm-a948a.firebaseapp.com",projectId:"trgovinarm-a948a",storageBucket:"trgovinarm-a948a.firebasestorage.app",messagingSenderId:"247090906476",appId:"1:247090906476:web:43ba257b7a7d76b1295f49"}),o=(0,s.aU)(l)},2940:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>i});var r=t(5155),s=t(2115),l=t(5695),o=t(1439),n=t(5317);function i(){let e=(0,l.useRouter)(),[a,t]=(0,s.useState)(""),[i,d]=(0,s.useState)(!1),[u,c]=(0,s.useState)(!0),[p,m]=(0,s.useState)(""),[g,h]=(0,s.useState)(""),[v,x]=(0,s.useState)(""),[f,j]=(0,s.useState)(""),[b,y]=(0,s.useState)([]),[w,N]=(0,s.useState)(!1),[k,S]=(0,s.useState)(""),[C,z]=(0,s.useState)(""),[D,q]=(0,s.useState)(""),[P,R]=(0,s.useState)(""),[_,K]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{console.log("Provjera admin konfiguracije...");let a=(0,n.H9)(o.db,"config","admin"),t=await (0,n.x7)(a);t.exists()?console.log("Admin konfiguracija učitana:",t.data()):(alert("⚠️ Konfiguracija za admin šifru nije pronađena."),e.push("/"))}catch(a){console.error("Greška pri provjeri admin šifre:",a),alert("⚠️ Greška pri provjeri šifre."),e.push("/")}finally{console.log("Provjera završena, postavljam checkingPassword na false"),c(!1)}})()},[e]);let O=async e=>{e.preventDefault(),m("");try{var t;let e=(0,n.H9)(o.db,"config","admin"),r=null==(t=(await (0,n.x7)(e)).data())?void 0:t.password;a===r?d(!0):m("❌ Pogrešna šifra.")}catch(e){m("⚠️ Došlo je do greške.")}},U=async e=>{if(e.preventDefault(),!b.length||b.length>3)return alert("Molimo izaberite 1 do 3 slike proizvoda.");N(!0);try{let e=[];for(let a of b){let t=new FormData;t.append("image",a);let r=await fetch("https://api.imgbb.com/1/upload?key=4e042ec45637e20e9739554a5a289304",{method:"POST",body:t}),s=await r.json();e.push(s.data.url)}await (0,n.gS)((0,n.rJ)(o.db,"products"),{name:g,price:parseFloat(v),description:f,brand:k,category:C,subcategory:D,sizes:P,isNew:_,imageUrl:e}),h(""),x(""),j(""),S(""),z(""),q(""),R(""),K(!1),y([]),alert("✅ Proizvod uspješno dodat!")}catch(e){console.error("Greška pri dodavanju:",e),alert("⚠️ Greška pri dodavanju proizvoda.")}N(!1)};return u?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center text-gray-700 text-lg",children:"\uD83D\uDD10 Učitavanje administratorske stranice..."}):i?(0,r.jsxs)("div",{className:"p-6 max-w-md mx-auto",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Dodaj novi proizvod"}),(0,r.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Naziv proizvoda",value:g,onChange:e=>h(e.target.value),className:"w-full border p-2 rounded",required:!0}),(0,r.jsx)("input",{type:"number",step:"0.01",placeholder:"Cijena u KM",value:v,onChange:e=>x(e.target.value),className:"w-full border p-2 rounded",required:!0}),(0,r.jsx)("input",{type:"text",placeholder:"Brand (npr. Nike)",value:k,onChange:e=>S(e.target.value),className:"w-full border p-2 rounded",required:!0}),(0,r.jsx)("input",{type:"text",placeholder:"Kategorija (npr. Obuća)",value:C,onChange:e=>z(e.target.value),className:"w-full border p-2 rounded",required:!0}),(0,r.jsx)("input",{type:"text",placeholder:"Potkategorija (npr. Muška)",value:D,onChange:e=>q(e.target.value),className:"w-full border p-2 rounded",required:!0}),(0,r.jsx)("input",{type:"text",placeholder:"Veličina (npr. 38)",value:P,onChange:e=>R(e.target.value),className:"w-full border p-2 rounded",required:!0}),(0,r.jsx)("textarea",{placeholder:"Opis proizvoda",value:f,onChange:e=>j(e.target.value),className:"w-full border p-2 rounded",required:!0}),(0,r.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:_,onChange:e=>K(e.target.checked)}),(0,r.jsx)("span",{children:"Je li proizvod nov?"})]}),(0,r.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{let a=Array.from(e.target.files);if(a.length>3)return void alert("Možete dodati maksimalno 3 slike.");y(a)},required:!0}),b.length>0&&(0,r.jsx)("div",{className:"flex gap-2 mt-2",children:b.map((e,a)=>(0,r.jsx)("img",{src:URL.createObjectURL(e),alt:"Preview",className:"w-20 h-20 object-cover rounded"},a))}),(0,r.jsx)("button",{type:"submit",disabled:w,className:"bg-green-600 text-white w-full p-2 rounded",children:w?"Dodavanje...":"Dodaj proizvod"})]})]}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,r.jsxs)("form",{onSubmit:O,className:"bg-white shadow-md p-6 rounded-md space-y-4 w-full max-w-sm",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-center text-gray-800",children:"Admin pristup"}),(0,r.jsx)("input",{type:"password",placeholder:"Unesite admin šifru",value:a,onChange:e=>t(e.target.value),className:"w-full border p-2 rounded",required:!0}),p&&(0,r.jsx)("p",{className:"text-red-600 text-sm",children:p}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-black text-white py-2 rounded hover:bg-gray-800",children:"Potvrdi"})]})})}},5695:(e,a,t)=>{"use strict";var r=t(8999);t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}})},6960:(e,a,t)=>{Promise.resolve().then(t.bind(t,2940))}},e=>{var a=a=>e(e.s=a);e.O(0,[992,399,441,684,358],()=>a(6960)),_N_E=e.O()}]);